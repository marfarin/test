## Установка

1. Склонируйте репозиторий в требуемый каталог на сервере
2. Выполните следующие комманды:
```
composer global require "fxp/composer-asset-plugin:^1.2.0"
composer install
```
3. Создайте тестовую и рабочую БД.
4. Отредактируйте конфигурацию БД для боевой базы в файле:
```
common/config/main-local.php
```
для тестовой базы в файле
```
tests/codeception/config/config-local.php
```
5. Выполните комманду
```
./yii migrate
```
6. Настройте web-сервер на следущий document root
```
frontend/web
```
7. Настройте тестовую БД. Для этого выполните из корневой директории проекта комманду
```
tests/codeception/bin/yii migrate
```
## Запуск тестов
Запуск тестов осуществляется из директории
```
tests\
```
Для запуска тестов выполните комманду
```
../vendor/codeception/bin/codecept run
```
## Настройка уведомлений
1. Вход в админку

    Для входа в админку использайте логин `superadmin`; пароль `superadmin`.
2. Настройка доступных классов
    
    В данной реализации автоматически добавляются события классов, отнаследованных от класса
    ```
    yii\base\Model
    ```
    Для обновления списка доступных событий (выраженных в виде констант) и классов вы можете зайти в
    ```
    event-class/index
    ```
    и нажать кнопку
    ```
    Update ALL Event Class.
    ```
    Будет автоматически добавлены все существующие в проекте классы и их события.
    
    Вы можете добавить свой класс, который не является потомком класса `yii\base\Model` и свои события.
 

3. Настройка Уведомлений.

    Добавление нового типа уведомлений происходит через наследование от абстрактного класса
    ```
    common/helpers/NotificationHelpers/AbstractNotificationHelper
    ```
    и добавление в БД соответствующей записи с помощью метода
    ```
    notification-type/create
    ```
    Надо помнить, что в поле `Class Name` вы должны указывать полное имя созданного класса.

    В классе для определения списка пользователей следует пользоваться публичным методом `users()`
4. Создание уведомлений
    Для создания уведомления используйте метод
    ```
    configure-model-event/create
    ```
    Поле `Name` отвечает за имя генерируемого уведомления
    
    В поле `Description` вы можете внести описание данного уведомления
    
    В поле `From` вы должны указать пользователя, от имени которого будет производиться рассылка
    
    В поле `User Id` вы должны указать пользователей, которые буду получателями сообщений рассылки.
    
    В поле `Role Id` вы можете указать роли пользователей, которые буду получателями сообщений рассылки.
    Следует помнить, что поля `User Id` и `Role Id` взаимозаменяемые и взаимодополняемые.
    
    В поле `Class Name` вы вводите имя класса, событие которого будет обрабатываться.
    
    В поле `Event Class Id` вы вводите ЗНАЧЕНИЕ константы, по которому будет инициировать событие.
    
    В `Message Header` находится шаблон заголовка сообщения
    
    В `Message Text` находится шаблон тела сообщения
    
    В `Notification Type Id` в должны ввести хотя бы один тип уведомлений (возможно неограниченное количество типов),
    с помощью которых будет осуществляться отправка уведомлений
    
## Общие замечания
Ссылка на [резюме](https://nn.hh.ru/resume/4f78a7f6ff02f08c230039ed1f786778415849).

Выполнены только юнит-тесты, поскольку по моему мнению другой тип тестирования в этом приложении не актуален.

Вся система может динамически настраиваться из web-интерфейса.

Обшее затраченное время составляет около 42 часов.